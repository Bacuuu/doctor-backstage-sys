<!DOCTYPE html>
<!-- saved from url=(0047)http://pratikborsadiya.in/vali-admin/index.html -->
<html lang="en" class="gr__pratikborsadiya_in">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>脊柱侧弯患者管理系统</title>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Main CSS-->
    <link rel="stylesheet" type="text/css" href="../public/css/main.css">
    <!-- Font-icon css-->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link href="https://cdn.staticfile.org/font-awesome/5.8.1/css/all.min.css" rel="stylesheet"> -->
    
    <!-- slider -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/jqueryui/1.12.1/jquery-ui.css">
    <script src="https://cdn.staticfile.org/jquery/3.4.0/jquery.js"></script>
    <script src="https://cdn.staticfile.org/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.staticfile.org/echarts/4.2.1-rc1/echarts.common.js"></script>
    <script src="../public/js/echarts-gl.js"></script>
    <script src="../public/js/simplex.js"></script>
  </head>
  <body class="app sidebar-mini rtl  pace-done" data-gr-c-s-loaded="true"><div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>
    <!-- Navbar-->
    <header class="app-header" style="background-color:rgb(112,125,124)"><a class="app-header__logo" style="background-color: rgb(112,125,124);box-shadow: 5px 0px 10px #000000;" href=""><img src="../public/assets/img/logo1.png" alt="" style="width:82px;height:24px;margin-bottom:15px;"></a>
      <!-- Navbar Right Menu-->
      <ul class="app-nav">
        <!-- <li class="app-search">
          <input class="app-search__input" type="search" placeholder="Search">
          <button class="app-search__button"><i class="fa fa-search"></i></button>
        </li> -->
        <!--Notification Menu-->
        <!-- 消息提醒 -->
        <li class="dropdown"><a class="app-nav__item" href="http://pratikborsadiya.in/vali-admin/index.html#" data-toggle="dropdown" aria-label="Show notifications"><i class="fa fa-bell-o fa-lg"></i></a>
          <ul class="app-notification dropdown-menu dropdown-menu-right">
            <li class="app-notification__title">You have 4 new notifications.</li>
            <div class="app-notification__content">
              <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-primary"></i><i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></span>
                  <div>
                    <p class="app-notification__message">Lisa sent you a mail</p>
                    <p class="app-notification__meta">2 min ago</p>
                  </div></a></li>
              <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-danger"></i><i class="fa fa-hdd-o fa-stack-1x fa-inverse"></i></span></span>
                  <div>
                    <p class="app-notification__message">Mail server not working</p>
                    <p class="app-notification__meta">5 min ago</p>
                  </div></a></li>
              <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-success"></i><i class="fa fa-money fa-stack-1x fa-inverse"></i></span></span>
                  <div>
                    <p class="app-notification__message">Transaction complete</p>
                    <p class="app-notification__meta">2 days ago</p>
                  </div></a></li>
              <div class="app-notification__content">
                <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-primary"></i><i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></span>
                    <div>
                      <p class="app-notification__message">Lisa sent you a mail</p>
                      <p class="app-notification__meta">2 min ago</p>
                    </div></a></li>
                <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-danger"></i><i class="fa fa-hdd-o fa-stack-1x fa-inverse"></i></span></span>
                    <div>
                      <p class="app-notification__message">Mail server not working</p>
                      <p class="app-notification__meta">5 min ago</p>
                    </div></a></li>
                <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-success"></i><i class="fa fa-money fa-stack-1x fa-inverse"></i></span></span>
                    <div>
                      <p class="app-notification__message">Transaction complete</p>
                      <p class="app-notification__meta">2 days ago</p>
                    </div></a></li>
              </div>
            </div>
            <li class="app-notification__footer"><a href="http://pratikborsadiya.in/vali-admin/index.html#">See all notifications.</a></li>
          </ul>
        </li>
        <!-- User Menu-->
        <!-- 用户菜单 -->
        <li class="dropdown"><a class="app-nav__item" href="http://pratikborsadiya.in/vali-admin/index.html#" data-toggle="dropdown" aria-label="Open Profile Menu"><i class="fa fa-user fa-lg"></i></a>
          <ul class="dropdown-menu settings-menu dropdown-menu-right">
            <li><a class="dropdown-item" href="http://pratikborsadiya.in/vali-admin/page-user.html"><i class="fa fa-cog fa-lg"></i> Settings</a></li>
            <li><a class="dropdown-item" href="http://pratikborsadiya.in/vali-admin/page-user.html"><i class="fa fa-user fa-lg"></i> Profile</a></li>
            <li><a class="dropdown-item" href="http://pratikborsadiya.in/vali-admin/page-login.html"><i class="fa fa-sign-out fa-lg"></i> Logout</a></li>
          </ul>
        </li>
      </ul>
    </header>
    <!-- Sidebar menu-->
    {# <div class="app-sidebar__overlay" data-toggle="sidebar"></div> #}
    <aside class="app-sidebar">
        <h4 class="panel-title">
            <a href="/parent" style="color:white;margin-left:30px">
            穿戴数据及日志
            </a>
        </h4>
        <br>
        <h4 class="panel-title">
            <a href="/fault" style="color:white;margin-left:30px">
            故障检测
            </a>
        </h4>
    </aside>

    <main class="app-content">
      <div class="row">
        <div class="col-md-6 col-lg-4">
          <font style="font-size:30px">左上压力传感器数据</font>
          <div id="3d1" style="width:500px;height:600px;margin-bottom:100px"></div>
        </div>
        <div class="col-md-6 col-lg-4">
          <font style="font-size:30px">左下压力传感器数据</font>
          <div id="3d2" style="width:500px;height:600px;margin-bottom:100px"></div>
        </div>
        <div class="col-md-6 col-lg-4">
          <font style="font-size:30px">右中压力传感器数据</font>
          <div id="3d3" style="width:500px;height:600px;margin-bottom:100px"></div>
        </div>
      </div>

<div class="panel-group" id="accordion">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
            </h4>
          </div>
          <div id="collapseInfo" class="panel-collapse" style="margin-left:0%">
            <div class="panel-body">
              <table class="table">
                <thead>
                <tr>
                    <th>异常点</th>
                    <th>异常传感器</th>
                    <th>异常时间</th>
                    <th>异常原因</th>
                </tr>
                <tr>
                  <th>左下</th>
                  <th>E</th>
                  <th>20190604</th>
                  <th>超出阈值</th>
                </tr>
                </thead>

            </table>

            </div>
          </div>
        </div>
      </div>

    </main>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/esm/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.staticfile.org/pace/1.0.2/pace.min.js"></script>
    <script>

    // 患者被点击
    $('.app-menu__item').click((tag) => {
      const { id } = tag.currentTarget;
      $('.app-menu__item').removeClass('active');
      $(`#${id}`).addClass('active')
      $.post('/patientInfo',{id},(data) => {
        $('#name').html(`姓名：${data.basicInfo.name}`);
        $('#age').html(`年龄：${data.basicInfo.age}`);
        if (data.basicInfo.gender === true) {
          $('#gender').html(`性别：男`);
        } else {
          $('#gender').html(`性别：女`);
        }
        $('#treatment_time').html(`治疗时间：${data.basicInfo.treatment_time}`);
        $('#last_time').html(`上次复查时间：${data.treatment_history[data.treatment_history.length-1].date}`)
        $('#sug_wear_time').html(`目前建议穿戴时间：${data.basicInfo.sug_wear_time}h`)
        // 诊断历史的html
        let treatment_history = '';
        for (item of data.treatment_history) {
          // console.log(item)
          treatment_history += `
          <tr>
            <td>${item.date}</td>
            <td>${data.basicInfo.name}</td>
            <td>${item.project}</td>
            <td>${item.info}</td>
            <td>${item.min_wear_time}</td>
          </tr>`
        }

        $('#treatment_history').html(treatment_history)
      })
    })

    // 标记用户
    $('.fa.fa-flag').click((tag) => {
      const { id } = tag.currentTarget.parentElement
      // console.log(id);
      $.post('/buffPatient',{id},(data) => {
        // console.log(data);
        console.log(tag.currentTarget)
        if (data === true) {
          tag.currentTarget.css('color','crimson')
        }
      })
    })

    // 取消标记用户
    $('.fa.fa-flag-o').click((tag) => {
      const { id } = tag.currentTarget.parentElement
      // console.log(id);
      $.post('/buffPatient',{id},(data) => {
        // console.log(data);
        if (data === true) {
          tag.currentTarget.css('color','crimson')
        }
      })
    })
    let _3d1 = echarts.init(document.getElementById('3d1'));
    let _3d2 = echarts.init(document.getElementById('3d2'));
    let _3d3 = echarts.init(document.getElementById('3d3'));

var data1 = [[0,0,45+10*Math.random()],[0,1,45+10*Math.random()],[0,2,45+10*Math.random()],[1,0,45+10*Math.random()],[1,1,45+10*Math.random()],[1,2,45+10*Math.random()],[2,0,45+10*Math.random()],[2,1,45+10*Math.random()],[2,2,45+10*Math.random()]];

var data2 = [[0,0,45+10*Math.random()],[0,1,45+10*Math.random()],[0,2,45+10*Math.random()],[1,0,45+10*Math.random()],[1,1,60+5*Math.random()],[1,2,45+10*Math.random()],[2,0,45+10*Math.random()],[2,1,45+10*Math.random()],[2,2,45+10*Math.random()]];

var data3 = [[0,0,45+10*Math.random()],[0,1,45+10*Math.random()],[0,2,45+10*Math.random()],[1,0,45+10*Math.random()],[1,1,45+10*Math.random()],[1,2,45+10*Math.random()],[2,0,45+10*Math.random()],[2,1,45+10*Math.random()],[2,2,45+10*Math.random()]];

_3d1.setOption(option = {
    visualMap: {
        show: true,
        min: 0,
        max: 10,
        inRange: {
            color: ['#313695', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4']
        }
    },
    xAxis3D: {
        type: 'value'
    },
    yAxis3D: {
        type: 'value'
    },
    zAxis3D: {
        type: 'value',
        max: 70,
        min: 30,
    },
    grid3D: {
        axisLine: {
            lineStyle: { color: '#fff' }
        },
        axisPointer: {
            lineStyle: { color: '#fff' }
        },
        viewControl: {
            // autoRotate: true
        },
        light: {
            main: {
                shadow: false,
                quality: 'ultra',
                intensity: 1.5
            }
        }
    },
    series: [{
        type: 'bar3D',
        data: data1,
        shading: 'lambert',
        label: {
            formatter: function (param) {
                return param.value[2].toFixed(1);
            }
        },
        itemStyle: {
          normal: {
                    //每个柱子的颜色即为colorList数组里的每一项，如果柱子数目多于colorList的长度，则柱子颜色循环使用该数组
            color: function (params) {
                var colorList = ['#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff']; //每根柱子的颜色
                return colorList[params.dataIndex];
            }
        }
        }
    }]
});
_3d2.setOption(option = {
    visualMap: {
        show: true,
        min: 0,
        max: 10,
        inRange: {
            color: ['#313695', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4']
        }
    },
    xAxis3D: {
        type: 'value'
    },
    yAxis3D: {
        type: 'value'
    },
    zAxis3D: {
        type: 'value',
        max: 70,
        min: 30,
    },
    grid3D: {
        axisLine: {
            lineStyle: { color: '#fff' }
        },
        axisPointer: {
            lineStyle: { color: '#fff' }
        },
        viewControl: {
            // autoRotate: true
        },
        light: {
            main: {
                shadow: false,
                quality: 'ultra',
                intensity: 1.5
            }
        }
    },
    series: [{
        type: 'bar3D',
        data: data2,
        shading: 'lambert',
        label: {
            formatter: function (param) {
                return param.value[2].toFixed(1);
            }
        },
        itemStyle: {
          normal: {
                    //每个柱子的颜色即为colorList数组里的每一项，如果柱子数目多于colorList的长度，则柱子颜色循环使用该数组
            color: function (params) {
                var colorList = ['#6666ff', '#6666ff', '#6666ff', '#6666ff', '#ff9900', '#6666ff', '#6666ff', '#6666ff', '#6666ff']; //每根柱子的颜色
                return colorList[params.dataIndex];
            }
        }
        }
    }]
});

_3d3.setOption(option = {
    visualMap: {
        show: true,
        min: 0,
        max: 10,
        inRange: {
            color: ['#313695', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4', '#4575b4']
        }
    },
    xAxis3D: {
        type: 'value'
    },
    yAxis3D: {
        type: 'value'
    },
    zAxis3D: {
        type: 'value',
        max: 70,
        min: 30,
    },
    grid3D: {
        axisLine: {
            lineStyle: { color: '#fff' }
        },
        axisPointer: {
            lineStyle: { color: '#fff' }
        },
        viewControl: {
            // autoRotate: true
        },
        light: {
            main: {
                shadow: false,
                quality: 'ultra',
                intensity: 1.5
            }
        }
    },
    series: [{
        type: 'bar3D',
        data: data3,
        shading: 'lambert',
        label: {
            formatter: function (param) {
                return param.value[2].toFixed(1);
            }
        },
        itemStyle: {
          normal: {
                    //每个柱子的颜色即为colorList数组里的每一项，如果柱子数目多于colorList的长度，则柱子颜色循环使用该数组
            color: function (params) {
                var colorList = ['#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff', '#6666ff']; //每根柱子的颜色
                return colorList[params.dataIndex];
            }
        }
        }
    }]
});

{# }); #}
        pressure_data1.on('click', function (params) {
          console.log(params)
        });

    </script>
    <!-- Google analytics script-->
    <!-- <script type="text/javascript">
      if(document.location.hostname == 'pratikborsadiya.in') {
      	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      	ga('create', 'UA-72504830-1', 'auto');
      	ga('send', 'pageview');
      }
    </script> -->
  
</body><div><div class="gr_-editor gr-iframe-first-load" style="display: none;"><div class="gr_-editor_back"></div><iframe class="gr_-ifr gr-_dialog-content" src="../public/assets/saved_resource.html"></iframe></div></div><grammarly-card><div></div></grammarly-card><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html>