<!DOCTYPE html>
<!-- saved from url=(0047)http://pratikborsadiya.in/vali-admin/index.html -->
<html lang="en" class="gr__pratikborsadiya_in">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>脊柱侧弯患者管理系统</title>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Main CSS-->
    <link rel="stylesheet" type="text/css" href="../public/css/main.css">
    <!-- Font-icon css-->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link href="https://cdn.staticfile.org/font-awesome/5.8.1/css/all.min.css" rel="stylesheet"> -->
    
    <!-- slider -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/jqueryui/1.12.1/jquery-ui.css">
    <script src="https://cdn.staticfile.org/jquery/3.4.0/jquery.js"></script>
    <script src="https://cdn.staticfile.org/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.staticfile.org/echarts/4.2.1-rc1/echarts.common.js"></script>
    <script src="../public/js/echarts-gl.js"></script>
    <script src="../public/js/simplex.js"></script>
  </head>
  <body class="app sidebar-mini rtl  pace-done" data-gr-c-s-loaded="true"><div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>
    <!-- Navbar-->
   <header class="app-header" style="background-color:rgb(112,125,124)"><a class="app-header__logo" style="background-color: rgb(112,125,124);box-shadow: 5px 0px 10px #555555;" href=""><img src="../public/assets/img/logo1.png" alt="" style="width:82px;height:24px;margin-bottom:15px;"></a>
  <!-- Navbar Right Menu-->
      <ul class="app-nav">
        <!-- <li class="app-search">
          <input class="app-search__input" type="search" placeholder="Search">
          <button class="app-search__button"><i class="fa fa-search"></i></button>
        </li> -->
        <!--Notification Menu-->
        <!-- 消息提醒 -->
        <li class="dropdown"><a class="app-nav__item" href="http://pratikborsadiya.in/vali-admin/index.html#" data-toggle="dropdown" aria-label="Show notifications"><i class="fa fa-bell-o fa-lg"></i></a>
          <ul class="app-notification dropdown-menu dropdown-menu-right">
            <li class="app-notification__title">You have 4 new notifications.</li>
            <div class="app-notification__content">
              <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-primary"></i><i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></span>
                  <div>
                    <p class="app-notification__message">Lisa sent you a mail</p>
                    <p class="app-notification__meta">2 min ago</p>
                  </div></a></li>
              <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-danger"></i><i class="fa fa-hdd-o fa-stack-1x fa-inverse"></i></span></span>
                  <div>
                    <p class="app-notification__message">Mail server not working</p>
                    <p class="app-notification__meta">5 min ago</p>
                  </div></a></li>
              <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-success"></i><i class="fa fa-money fa-stack-1x fa-inverse"></i></span></span>
                  <div>
                    <p class="app-notification__message">Transaction complete</p>
                    <p class="app-notification__meta">2 days ago</p>
                  </div></a></li>
              <div class="app-notification__content">
                <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-primary"></i><i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></span>
                    <div>
                      <p class="app-notification__message">Lisa sent you a mail</p>
                      <p class="app-notification__meta">2 min ago</p>
                    </div></a></li>
                <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-danger"></i><i class="fa fa-hdd-o fa-stack-1x fa-inverse"></i></span></span>
                    <div>
                      <p class="app-notification__message">Mail server not working</p>
                      <p class="app-notification__meta">5 min ago</p>
                    </div></a></li>
                <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x text-success"></i><i class="fa fa-money fa-stack-1x fa-inverse"></i></span></span>
                    <div>
                      <p class="app-notification__message">Transaction complete</p>
                      <p class="app-notification__meta">2 days ago</p>
                    </div></a></li>
              </div>
            </div>
            <li class="app-notification__footer"><a href="http://pratikborsadiya.in/vali-admin/index.html#">See all notifications.</a></li>
          </ul>
        </li>
        <!-- User Menu-->
        <!-- 用户菜单 -->
        <li class="dropdown"><a class="app-nav__item" href="http://pratikborsadiya.in/vali-admin/index.html#" data-toggle="dropdown" aria-label="Open Profile Menu"><i class="fa fa-user fa-lg"></i></a>
          <ul class="dropdown-menu settings-menu dropdown-menu-right">
            <li><a class="dropdown-item" href="http://pratikborsadiya.in/vali-admin/page-user.html"><i class="fa fa-cog fa-lg"></i> Settings</a></li>
            <li><a class="dropdown-item" href="http://pratikborsadiya.in/vali-admin/page-user.html"><i class="fa fa-user fa-lg"></i> Profile</a></li>
            <li><a class="dropdown-item" href="http://pratikborsadiya.in/vali-admin/page-login.html"><i class="fa fa-sign-out fa-lg"></i> Logout</a></li>
          </ul>
        </li>
      </ul>
    </header>
    <!-- Sidebar menu-->
    {# <div class="app-sidebar__overlay" data-toggle="sidebar"></div> #}
    <aside class="app-sidebar">
        <h4 class="panel-title">
            <a style="color:white;margin-left:30px">
            穿戴数据及日志
            </a>
        </h4>
        <br>
        <h4 class="panel-title">
            <a href="/fault" style="color:white;margin-left:30px">
            故障检测
            </a>
        </h4>
    </aside>

    <main class="app-content">
      <div class="row">
        <div class="col-md-6 col-lg-3">
          <div class="widget-small primary coloured-icon" style="color: #ffffff;box-shadow: 5px 0px 10px #999999"><i class="fa fa-users fa-3x" style="color: #000000;margin: 15px 24px 15px 24px "></i>
            <div class="info">
              <h4 id="name" style="color: black">姓名：张六</h4>
              <h4 id="age" style="color: black">年龄：13</h4>
              <h4 id="gender" style="color: black">性别：男</h4>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="widget-small info coloured-icon" style="color: #ffffff; box-shadow: 5px 0px 10px #999999"><i class="fa fa-thumbs-o-up fa-3x" style="color: #000000;margin: 15px 24px 15px 24px "></i>
            <div class="info">
                <h4 id="treatment_time" style="color: black">治疗时间：2年5个月</h4>
                <h4 id="last_time" style="color: black">上次复查时间:2018.03.14</h4>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="widget-small primary coloured-icon" style="color: #ffffff; box-shadow: 5px 0px 10px #999999"><i class="fa fa-clock-o fa-3x" style="color: #000000;margin-left:24px;margin: 15px 24px 15px 24px "></i>
            <div class="info">
                <h4 id="sug_wear_time" style="color: black">目前建议穿戴时间:22H</h4>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3">
          <div class="widget-small info coloured-icon" style="color: #ffffff; box-shadow: 5px 0px 10px #999999"><i class="fa fa-thumbs-o-up fa-3x" style="color: #000000;margin-left:24px;margin: 15px 24px 15px 24px "></i>
            <div class="info">
                <h4 id="sport_time" style="color: black">运动量：2580</h4>
            </div>
          </div>
        </div>
      </div>

      <!-- <div id="slider" style="width:1000px;height:12px;margin-left: 0%;margin-top:30px"></div>
      <span style="margin-bottom: 30px;margin-left: 0%;font-size: 20px">30天前 ———— 0天前数据</span> -->
        <div class="row" style="margin-left:0%">
            <div class="col-md-4">
                <div id="pressure_detail" style="width: 450px; height: 900px; margin-top:70px;margin-left: 30px"></div>
            </div>
            <div class="col-md-8">
                <div class="tile" style="width:1100px">
                <h3 class="tile-title">压力传感器数据</h3>
                    <div id="pressureData1" style="width: 1000px; height: 300px;"></div>
                    <div id="pressureData2" style="width: 1000px; height: 300px;"></div>
                    <div id="pressureData3" style="width: 1000px; height: 300px;"></div>
                </div>
            </div>
        </div> 

        <div class="row" style="margin-left:0%">
            <div class="col-md-6">
                <div class="tile" style="width:1600px">
                    <h3 class="tile-title">患者佩戴时间数据</h3>
                    <div id="patientTime" style="width: 1700px; height: 422px;"></div>
                </div>
            </div>
        </div>
        
        </div>
      </div>
    </main>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/esm/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    {# <script src="../public/js/main.js"></script> #}
    <!-- The javascript plugin to display page loading on top-->
    <script src="https://cdn.staticfile.org/pace/1.0.2/pace.min.js"></script>
    <!-- Page specific javascripts-->
    {# <script type="text/javascript" src="../public/js/chart.js"></script> #}
    <script>

    // 患者被点击
    $('.app-menu__item').click((tag) => {
      const { id } = tag.currentTarget;
      $('.app-menu__item').removeClass('active');
      $(`#${id}`).addClass('active')
      $.post('/patientInfo',{id},(data) => {
        $('#name').html(`姓名：${data.basicInfo.name}`);
        $('#age').html(`年龄：${data.basicInfo.age}`);
        if (data.basicInfo.gender === true) {
          $('#gender').html(`性别：男`);
        } else {
          $('#gender').html(`性别：女`);
        }
        $('#treatment_time').html(`治疗时间：${data.basicInfo.treatment_time}`);
        $('#last_time').html(`上次复查时间：${data.treatment_history[data.treatment_history.length-1].date}`)
        $('#sug_wear_time').html(`目前建议穿戴时间：${data.basicInfo.sug_wear_time}h`)
        // 诊断历史的html
        let treatment_history = '';
        for (item of data.treatment_history) {
          // console.log(item)
          treatment_history += `
          <tr>
            <td>${item.date}</td>
            <td>${data.basicInfo.name}</td>
            <td>${item.project}</td>
            <td>${item.info}</td>
            <td>${item.min_wear_time}</td>
          </tr>`
        }

        $('#treatment_history').html(treatment_history)
      })
    })

    // 标记用户
    $('.fa.fa-flag').click((tag) => {
      const { id } = tag.currentTarget.parentElement
      // console.log(id);
      $.post('/buffPatient',{id},(data) => {
        // console.log(data);
        console.log(tag.currentTarget)
        if (data === true) {
          tag.currentTarget.css('color','crimson')
        }
      })
    })

    // 取消标记用户
    $('.fa.fa-flag-o').click((tag) => {
      const { id } = tag.currentTarget.parentElement
      // console.log(id);
      $.post('/buffPatient',{id},(data) => {
        // console.log(data);
        if (data === true) {
          tag.currentTarget.css('color','crimson')
        }
      })
    })
    let patient_time = echarts.init(document.getElementById('patientTime'));
    let pressure_data1 = echarts.init(document.getElementById('pressureData1'));
    let pressure_data2 = echarts.init(document.getElementById('pressureData2'));
    let pressure_data3 = echarts.init(document.getElementById('pressureData3'));
    let pressure_detail = echarts.init(document.getElementById('pressure_detail'));

    time_option = {
      title: {
          text: '患者穿戴时间'
      },
      tooltip: {
          trigger: 'axis'
      },
      xAxis: {
          data: ["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"]
      },
      yAxis: {
          type: 'value',
          max: 24,
      },
      toolbox: {
          left: 'center',
          feature: {
              dataZoom: {
                  yAxisIndex: 'none'
              },
              restore: {},
              saveAsImage: {}
          }
      },
      dataZoom: [{
          startValue: '2014-06-01'
      }, {
          type: 'inside'
      }],
      series: {
          name: '患者穿戴时间',
          type: 'line',
          smooth: true,
          areaStyle: {
              color: 'rgba(0,230,1,0.1)',
          },
          data: [19,23,24,15,15,21,23,22,22,22,21,24,22,24,23,21,20,24,16,23,22,21,17,19,23,21,22,22,17,22,0],
          markLine: {
              silent: true,
              data: [{
                  yAxis: 22,
              }]
          }
      }
  };


    let data1 = [];
    for (let x=1; x<366; x++) {
      data1.push(50 + Math.random()*(366-x)/20)
    }

    let data2 = [];
    for (let x=1; x<366; x++) {
      data2.push(50 - Math.random()*(366-x)/20)
    }

    let data3 = [];
    for (let x=1; x<366; x++) {
      data3.push(50 + Math.random()*(366-x)/20)
    }

    pressure_option1 = {
        title: {
            text: '左上压力传感器数据'
        },
        tooltip: {
            trigger: 'axis'
        },
        xAxis: {
            data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '111', '112', '113', '114', '115', '116', '117', '118', '119', '120', '121', '122', '123', '124', '125', '126', '127', '128', '129', '130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '140', '141', '142', '143', '144', '145', '146', '147', '148', '149', '150', '151', '152', '153', '154', '155', '156', '157', '158', '159', '160', '161', '162', '163', '164', '165', '166', '167', '168', '169', '170', '171', '172', '173', '174', '175', '176', '177', '178', '179', '180', '181', '182', '183', '184', '185', '186', '187', '188', '189', '190', '191', '192', '193', '194', '195', '196', '197', '198', '199', '200', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '211', '212', '213', '214', '215', '216', '217', '218', '219', '220', '221', '222', '223', '224', '225', '226', '227', '228', '229', '230', '231', '232', '233', '234', '235', '236', '237', '238', '239', '240', '241', '242', '243', '244', '245', '246', '247', '248', '249', '250', '251', '252', '253', '254', '255', '256', '257', '258', '259', '260', '261', '262', '263', '264', '265', '266', '267', '268', '269', '270', '271', '272', '273', '274', '275', '276', '277', '278', '279', '280', '281', '282', '283', '284', '285', '286', '287', '288', '289', '290', '291', '292', '293', '294', '295', '296', '297', '298', '299', '300', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '311', '312', '313', '314', '315', '316', '317', '318', '319', '320', '321', '322', '323', '324', '325', '326', '327', '328', '329', '330', '331', '332', '333', '334', '335', '336', '337', '338', '339', '340', '341', '342', '343', '344', '345', '346', '347', '348', '349', '350', '351', '352', '353', '354', '355', '356', '357', '358', '359', '360', '361', '362', '363', '364', '365']
        },
        yAxis: {
            type: 'value',
            min: 0,
            max: 100,
        },
        toolbox: {
            left: 'center',
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
            }
        },
        dataZoom: [{
            startValue: '2014-06-01'
        }, {
            type: 'inside'
        }],
        series: [{
            name: '传感器1',
            type: 'line',
            smooth: true,
            areaStyle: {
                color: 'rgba(200,0,0,0.1)',
            },
            data: data1,
            markLine: {
                silent: true,
                data: [{
                    yAxis: 22,
                }]
            }
        }]
    };

      pressure_option2 = {
        title: {
            text: '左下压力传感器数据'
        },
        tooltip: {
            trigger: 'axis'
        },
        xAxis: {
            data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '111', '112', '113', '114', '115', '116', '117', '118', '119', '120', '121', '122', '123', '124', '125', '126', '127', '128', '129', '130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '140', '141', '142', '143', '144', '145', '146', '147', '148', '149', '150', '151', '152', '153', '154', '155', '156', '157', '158', '159', '160', '161', '162', '163', '164', '165', '166', '167', '168', '169', '170', '171', '172', '173', '174', '175', '176', '177', '178', '179', '180', '181', '182', '183', '184', '185', '186', '187', '188', '189', '190', '191', '192', '193', '194', '195', '196', '197', '198', '199', '200', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '211', '212', '213', '214', '215', '216', '217', '218', '219', '220', '221', '222', '223', '224', '225', '226', '227', '228', '229', '230', '231', '232', '233', '234', '235', '236', '237', '238', '239', '240', '241', '242', '243', '244', '245', '246', '247', '248', '249', '250', '251', '252', '253', '254', '255', '256', '257', '258', '259', '260', '261', '262', '263', '264', '265', '266', '267', '268', '269', '270', '271', '272', '273', '274', '275', '276', '277', '278', '279', '280', '281', '282', '283', '284', '285', '286', '287', '288', '289', '290', '291', '292', '293', '294', '295', '296', '297', '298', '299', '300', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '311', '312', '313', '314', '315', '316', '317', '318', '319', '320', '321', '322', '323', '324', '325', '326', '327', '328', '329', '330', '331', '332', '333', '334', '335', '336', '337', '338', '339', '340', '341', '342', '343', '344', '345', '346', '347', '348', '349', '350', '351', '352', '353', '354', '355', '356', '357', '358', '359', '360', '361', '362', '363', '364', '365']
        },
        yAxis: {
            type: 'value',
            min: 0,
            max: 100,
        },
        toolbox: {
            left: 'center',
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
            }
        },
        dataZoom: [{
            startValue: '2014-06-01'
        }, {
            type: 'inside'
        }],
        series: [{
            name: '传感器1',
            type: 'line',
            smooth: true,
            areaStyle: {
                color: 'rgba(200,0,0,0.1)',
            },
            data: data2,
            markLine: {
                silent: true,
                data: [{
                    yAxis: 22,
                }]
            }
        }]
    };

      pressure_option3 = {
        title: {
            text: '右中压力传感器数据'
        },
        tooltip: {
            trigger: 'axis'
        },
        xAxis: {
            data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101', '102', '103', '104', '105', '106', '107', '108', '109', '110', '111', '112', '113', '114', '115', '116', '117', '118', '119', '120', '121', '122', '123', '124', '125', '126', '127', '128', '129', '130', '131', '132', '133', '134', '135', '136', '137', '138', '139', '140', '141', '142', '143', '144', '145', '146', '147', '148', '149', '150', '151', '152', '153', '154', '155', '156', '157', '158', '159', '160', '161', '162', '163', '164', '165', '166', '167', '168', '169', '170', '171', '172', '173', '174', '175', '176', '177', '178', '179', '180', '181', '182', '183', '184', '185', '186', '187', '188', '189', '190', '191', '192', '193', '194', '195', '196', '197', '198', '199', '200', '201', '202', '203', '204', '205', '206', '207', '208', '209', '210', '211', '212', '213', '214', '215', '216', '217', '218', '219', '220', '221', '222', '223', '224', '225', '226', '227', '228', '229', '230', '231', '232', '233', '234', '235', '236', '237', '238', '239', '240', '241', '242', '243', '244', '245', '246', '247', '248', '249', '250', '251', '252', '253', '254', '255', '256', '257', '258', '259', '260', '261', '262', '263', '264', '265', '266', '267', '268', '269', '270', '271', '272', '273', '274', '275', '276', '277', '278', '279', '280', '281', '282', '283', '284', '285', '286', '287', '288', '289', '290', '291', '292', '293', '294', '295', '296', '297', '298', '299', '300', '301', '302', '303', '304', '305', '306', '307', '308', '309', '310', '311', '312', '313', '314', '315', '316', '317', '318', '319', '320', '321', '322', '323', '324', '325', '326', '327', '328', '329', '330', '331', '332', '333', '334', '335', '336', '337', '338', '339', '340', '341', '342', '343', '344', '345', '346', '347', '348', '349', '350', '351', '352', '353', '354', '355', '356', '357', '358', '359', '360', '361', '362', '363', '364', '365']
        },
        yAxis: {
            type: 'value',
            min: 0,
            max: 100,
        },
        toolbox: {
            left: 'center',
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
            }
        },
        dataZoom: [{
            startValue: '2014-06-01'
        }, {
            type: 'inside'
        }],
        series: [{
            name: '传感器1',
            type: 'line',
            smooth: true,
            areaStyle: {
                color: 'rgba(200,0,0,0.1)',
            },
            data: data3,
            markLine: {
                silent: true,
                data: [{
                    yAxis: 22,
                }]
            }
        }]
    };


    var labelRight = 
    {
        normal: {
            position: 'right'
        }
    };

      var labelLeft = 
      {
        normal: {
            position: 'left'
        }
    };

    function getData() {
      $.post('/ajaxGetData', (data)=> {
      const sensor1 = (data.pressure[0]+data.pressure[1])/20;
      const sensor2 = (data.pressure[2]+data.pressure[3])/20;
      const sensor3 = (data.pressure[4]+data.pressure[5])/20;
      const color_list = []
      if (sensor1 > 100 || sensor1 < 40) {
          color_list.push('#ff9900');
      } else {
          color_list.push('#6666ff');
      }

      if (sensor2 > 100 || sensor2 < 40) {
          color_list.push('#ff9900');
      } else {
          color_list.push('#6666ff');
      }

      if (sensor3 > 100 || sensor3 < 40) {
          color_list.push('#ff9900');
      } else {
          color_list.push('#6666ff');
      }
      console.log(color_list)
      pressure_detail_option =
      {
        title: {
            text: '详细数据',
        },
        tooltip : {
            trigger: 'axis',
            axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        grid: {
            top: 80,
            bottom: 30,
        },
        xAxis: {
            type : 'value',
            position: 'top',
            splitLine: {lineStyle:{type:'dashed'}},
            min: 0,
            max: 110,
        },
        yAxis: {
            type : 'category',
            axisLine: {show: false},
            axisLabel: {show: false},
            axisTick: {show: true},
            splitLine: {show: false},
            data : ['左上', '右中', '左下']
        },
        series : [
            {
              name:'压力值',
              type:'bar',
              stack: '总量',
              barWidth: 65,
              label: {
                  normal: {
                      show: true,
                      formatter: '{b}'
                  }
              },
              data:[
                  {value: sensor1, label:labelLeft},
                  {value: sensor2, label:labelRight},
                  {value: sensor3, label:labelLeft},
              ],
              itemStyle: {
                normal: {
                  color: function (params){
                            var colorList = color_list;
                            return colorList[params.dataIndex];
                        }
                }
              },
              markLine: {
                  data: [{
                      name: 'max',
                      xAxis: 100,
                  },{
                    name: 'min',
                    xAxis: 40,
                  }]
              }
            }
        ]
  };
  pressure_detail.setOption(pressure_detail_option);
  })
  setTimeout("getData()", 500)
    }

getData();
 

        
    



{# }); #}

        patient_time.setOption(time_option);
        pressure_data1.setOption(pressure_option1);
        pressure_data2.setOption(pressure_option2);
        pressure_data3.setOption(pressure_option3);

    </script>
    <!-- Google analytics script-->
    <!-- <script type="text/javascript">
      if(document.location.hostname == 'pratikborsadiya.in') {
      	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      	ga('create', 'UA-72504830-1', 'auto');
      	ga('send', 'pageview');
      }
    </script> -->
  
</body><div><div class="gr_-editor gr-iframe-first-load" style="display: none;"><div class="gr_-editor_back"></div><iframe class="gr_-ifr gr-_dialog-content" src="../public/assets/saved_resource.html"></iframe></div></div><grammarly-card><div></div></grammarly-card><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span></html>